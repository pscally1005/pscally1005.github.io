<div id="search-container">
    <!-- Search Input Field -->
    <input type="text" id="search-input" placeholder="Type your search here..." autofocus>
    
    <!-- Search Results Container -->
    <ul id="results-container"></ul>
    
    <!-- Search Results Count -->
    <div id="results-count"></div> <!-- This will display the number of results found -->
</div>

<!-- Include the Simple Jekyll Search script -->
<script src="/assets/js/search-script.js" type="text/javascript"></script>

<script>
    // Initialize Simple Jekyll Search
    SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),    // Input field for search
        resultsContainer: document.getElementById('results-container'),  // Container for search results
        json: '/search.json',  // Path to JSON file with posts data
        searchResultTemplate: `
            <li class="result-item">
                <a class="post-link" href="{url}">
                    <img src="{image}" alt="" class="blog-roll-image">
                    <span class="post-meta">{date}</span>
                    <div class="post-title">
                        <span class="post-count"></span> <!-- Placeholder for numbering -->
                        <a class="post-link" href="{url}">{title}</a>
                    </div>
                </a>
            </li>`,
        noResultsText: "No results found!"
    });

    // Listen for keyup events in the search input
    document.getElementById('search-input').addEventListener('keyup', function() {
        // After Simple Jekyll Search updates the results, count the results
        setTimeout(function() {
            let resultItems = document.querySelectorAll('#results-container .result-item');
            let resultsCountElement = document.getElementById('results-count');

            // Display number of results found
            let resultCount = resultItems.length;
            if (resultCount > 0) {
                resultsCountElement.innerText = resultCount + " result(s) found";
                
                // Add numbering to each result
                let count = 1;
                resultItems.forEach(function(item) {
                    let countElement = item.querySelector('.post-count');
                    if (countElement) {
                        countElement.textContent = count + ".";
                    }
                    count++;
                });
            } else {
                resultsCountElement.innerText = "No results found";
            }
        }, 300);  // Timeout to ensure results are updated before counting
    });
</script>
